<view class="container data-v-bf16e7f4" style="{{'bottom:'+(pageBottomHeight+'px')+';'}}"><view class="message-list scroller data-v-bf16e7f4"><block wx:for="{{$root.l0}}" wx:for-item="message" wx:for-index="index" wx:key="index"><view class="{{['message-box','data-v-bf16e7f4',message.$orig.sender==userInfo.id?'self-message-item':'']}}"><image class="head-portrait data-v-bf16e7f4" src="{{message.$orig.sender==userInfo.id?userAvatar:message.$orig.senderInfo.avatarUrl}}"></image><view class="content data-v-bf16e7f4"><block wx:if="{{message.$orig.sender!=userInfo.id}}"><view class="message-sender-name data-v-bf16e7f4">{{message.$orig.senderInfo.nickname||'0.0'}}</view></block><view class="{{['data-v-bf16e7f4',[(message.$orig.sender==userInfo.id)?'self-message':''],[(message.$orig.sender!=userInfo.id)?'other-message':''],'message-type-'+message.$orig.type]}}"><block wx:if="{{message.$orig.type==1}}"><view class="text data-v-bf16e7f4">{{message.$orig.content||"empty message..."}}</view></block><block wx:if="{{message.$orig.type==2}}"><view class="image data-v-bf16e7f4"><image class="img data-v-bf16e7f4" style="width:200rpx;height:200rpx;" src="{{message.m0}}" mode="aspect-fit" data-event-opts="{{[['tap',[['previewImage',['$0'],[[['messageList','',index]]]]]]]}}" bindtap="__e"></image></view></block><block wx:if="{{message.$orig.type==3}}"><view class="audio data-v-bf16e7f4">{{''+message.m1+''}}<image class="icon data-v-bf16e7f4" src="../../static/audio.png" data-event-opts="{{[['tap',[['audioPlay',['$0'],[[['messageList','',index,'content']]]]]]]}}" bindtap="__e"></image></view></block><block wx:if="{{message.$orig.type==4}}"><view class="video data-v-bf16e7f4"><video style="width:400rpx;height:400rpx;" src="{{message.m2}}" enable-danmu="{{true}}" danmu-btn="{{true}}" controls="{{true}}" class="data-v-bf16e7f4"></video></view></block></view></view></view><block wx:if="{{message.$orig.type=='entryGroup'}}"><view class="middle-message data-v-bf16e7f4">{{message.$orig.content}}</view></block></block></view><view id="viewBottomTag" class="data-v-bf16e7f4"></view><view class="bottom-operation-tabbar data-v-bf16e7f4" style="{{'bottom:'+(keyboardheight+'px')+';'}}"><view class="tabbar-list data-v-bf16e7f4"><image class="icon item data-v-bf16e7f4" src="../../static/voice.png" data-event-opts="{{[['tap',[['startAudio',['$event']]]]]}}" bindtap="__e"></image><textarea class="uni-input item message-input data-v-bf16e7f4" type="text" maxlength="-1" show-confirm-bar="{{false}}" hold-keyboard="{{true}}" auto-height="{{true}}" adjust-position="{{false}}" cursor-spacing="20" placeholder="请输入内容" data-event-opts="{{[['focus',[['inputFocus',['$event']]]],['blur',[['inputBlur',['$event']]]],['input',[['__set_model',['$0','textMessage','$event',[]],['form']]]]]}}" value="{{form.textMessage}}" bindfocus="__e" bindblur="__e" bindinput="__e"></textarea><image class="icon item data-v-bf16e7f4" src="../../static/face.png"></image><block wx:if="{{$root.g0==0}}"><image class="icon item data-v-bf16e7f4" src="../../static/add.png" data-event-opts="{{[['tap',[['chooseMedia']]]]}}" bindtap="__e"></image></block><block wx:if="{{$root.g1>0}}"><button class="mini-btn item message-send data-v-bf16e7f4" type="primary" size="mini" data-event-opts="{{[['tap',[['clickSendMessage']]]]}}" bindtap="__e">发送</button></block></view></view></view>